import{j as O}from"./jsx-runtime-ffb262ed.js";import{r as Y,i as G}from"./index-f6a7b0e8.js";import{u as F,i as J,j as Q,d as w,k as X,l as Z}from"./index-37a28390.js";import{B as tt}from"./Button-35673546.js";import{R as d,r as p}from"./index-76fb7be0.js";import{R as et,u as rt}from"./index-0d2ac839.js";var R={},at=G;Object.defineProperty(R,"__esModule",{value:!0});var L=R.default=void 0,nt=at(Y()),ot=O,it=(0,nt.default)((0,ot.jsx)("path",{d:"M17.51 3.87 15.73 2.1 5.84 12l9.9 9.9 1.77-1.77L9.38 12l8.13-8.13z"}),"ArrowBackIosOutlined");L=R.default=it;const lt={alignSelf:"flex-start",fontSize:12,fontWeight:500,lineHeight:1.33},$t=()=>{const t=F();return O.jsx(tt,{onClick:()=>t(-1),variant:"text",color:"surface",startIcon:O.jsx(L,{}),sx:lt,children:"Назад"})},{makeDecorator:ut,addons:S}=__STORYBOOK_MODULE_PREVIEW_API__;var y="storybook/react-router-v6",st="reactRouter",u={CLEAR:`${y}/clear`,NAVIGATION:`${y}/navigation`,STORY_LOADED:`${y}/story-loaded`,ROUTE_MATCHES:`${y}/route-matches`,ACTION_INVOKED:`${y}/action_invoked`,ACTION_SETTLED:`${y}/action_settled`,LOADER_INVOKED:`${y}/loader_invoked`,LOADER_SETTLED:`${y}/loader_settled`},N=d.createContext([]),b=d.createContext(void 0);function ct(){let[t,r]=p.useState([]),e=Q;return e.Provider._context=new Proxy(e.Provider._context??{},{set(a,n,o){return n==="_currentValue"&&o!==void 0&&r(i=>o.matches.length>i.length?o.matches:i),Reflect.set(a,n,o)}}),t}function ht(t){let r={};return t.forEach((e,a)=>{if(e instanceof File){r[a]={filename:e.name,filesize:e.size,filetype:e.type};return}r[a]=e}),r}async function P(t){let r=t.clone(),e=r.headers.get("content-type")||"",a;switch(!0){case e.startsWith("text"):a=await r.text();break;case e.startsWith("application/json"):a=await r.json();break;case e.startsWith("multipart/form-data"):case e.startsWith("application/x-www-form-urlencoded"):{a=ht(await r.formData());break}}return a}var $=()=>{let t=p.useRef(0);return p.useCallback(async(r,e)=>{t.current++;let a=`${r}_${t.current}`;switch(r){case u.ACTION_INVOKED:{let{request:n,params:o,context:i}=e,s={url:n.url,method:n.method,body:await P(n)};return{key:a,type:r,data:{params:o,request:s,context:i}}}case u.ACTION_SETTLED:return{key:a,type:r,data:e};case u.LOADER_INVOKED:{let{request:n,params:o,context:i}=e,s={url:n.url,method:n.method,body:await P(n)};return{key:a,type:r,data:{params:o,request:s,context:i}}}case u.LOADER_SETTLED:return{key:a,type:r,data:e}}},[])};function dt(){let t=S.getChannel(),r=$();return p.useCallback(e=>async function(a){if(e===void 0)return;t.emit(u.ACTION_INVOKED,await r(u.ACTION_INVOKED,a));let n=await e(a);return t.emit(u.ACTION_SETTLED,await r(u.ACTION_SETTLED,n)),n},[t,r])}function mt(){let t=S.getChannel(),r=$();return p.useCallback(e=>async function(a){if(e===void 0)return;t.emit(u.LOADER_INVOKED,await r(u.LOADER_INVOKED,a));let n=await e(a);return t.emit(u.LOADER_SETTLED,await r(u.LOADER_SETTLED,n)),n},[t,r])}function ft(){let t=dt(),r=mt(),e=p.useCallback(a=>a.map(n=>{let{action:o,loader:i,children:s,lazy:m}=n,c={...n};return m&&(c.lazy=async function(){let l=await m(),h={...l};return l.action&&(h.action=t(l.action)),l.loader&&(h.loader=r(l.loader)),h}),o&&(c.action=t(o)),i&&(c.loader=r(i)),s&&(c.children=e(s)),c}),[t,r]);return e}var j=()=>{let t=d.useContext(b);if(t===void 0)throw new Error("useStory should be used inside <StoryContext>");return t};function V(t,r){if(t.length===1&&(t[0].children===void 0||t[0].children.length===0))return[{...t[0],element:r}];let e=t.findIndex(a=>a.useStoryElement);if(e!==-1){let a=Array.from(t);return a.splice(e,1,{...t[e],element:r}),a}return t.map(a=>a.children?{...a,children:V(a.children,r)}:a)}var I;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(I||(I={}));function x(t,r){if(t===!1||t===null||typeof t>"u")throw new Error(r)}var C;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(C||(C={}));function k(t,r){r===void 0&&(r={});let e=t;return e.endsWith("*")&&e!=="*"&&!e.endsWith("/*")&&(pt(!1,'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".')),e=e.replace(/\*$/,"/*")),e.replace(/^:(\w+)(\??)/g,(a,n,o)=>{let i=r[n];return o==="?"?i??"":(i==null&&x(!1,'Missing ":'+n+'" param'),i)}).replace(/\/:(\w+)(\??)/g,(a,n,o)=>{let i=r[n];return o==="?"?i==null?"":"/"+i:(i==null&&x(!1,'Missing ":'+n+'" param'),"/"+i)}).replace(/\?/g,"").replace(/(\/?)\*/,(a,n,o,i)=>{let s="*";return r[s]==null?i==="/*"?"/":"":""+n+r[s]})}function pt(t,r){if(!t){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}var H=["post","put","patch","delete"];new Set(H);var yt=["get",...H];new Set(yt);function Et({navigationHistory:t,location:r,routes:e}){if(t!==void 0){let h=[],E,T=Object.values(t);for(let g=0;g<T.length;g++){let{path:v,pathParams:D,searchParams:B,hash:U,state:W,isInitialLocation:q}=T[g];q&&(E=g);let A=_(e),z=(typeof v=="function"?v(A,D??{}):v)??A;h.push({pathname:k(z??"/",D),search:new URLSearchParams(B).toString(),hash:U,state:W})}return E??(E=h.length-1),{initialEntries:h,initialIndex:E}}let{path:a,pathParams:n,searchParams:o,hash:i,state:s}=r??{},m=_(e),c=(typeof a=="function"?a(m,n??{}):a)??m,l=0;return{initialEntries:[{pathname:k(c,n),search:new URLSearchParams(o).toString(),hash:i,state:s}],initialIndex:l}}function _(t=[],r="/"){if(t.length!==1)return r;let e=t[0],a=gt(r,e.path);return e.children===void 0||e.children.length===0?a:_(e.children,a)}function gt(t,r=""){let e=["","/"],a=t.split("/").filter(o=>!e.includes(o)),n=r.split("/").filter(o=>!e.includes(o));return"/"+[...a,...n].join("/")}function f(t,r){return Object.prototype.hasOwnProperty.call(t,r)}function vt(t){return arguments.length===0?[]:Array.isArray(t)?t:[t]}function Ot(t){var r;return t===void 0?[{path:"/"}]:typeof t=="string"?[{path:t}]:(t=vt(t),t.length===1&&((r=t[0]).path??(r.path="/")),t)}var M=()=>d.useContext(N);function _t(t){let r={};return t.forEach((e,a)=>{let n=r[a];if(typeof n=="string"){r[a]=[n,e];return}if(Array.isArray(n)){r[a]=[...n,e];return}r[a]=e}),r}var wt=()=>{let t=w(),r=t.pathname;return t.search.length>0&&(r+=`?${t.search}`),t.hash.length>0&&(r+=`#${t.hash}`),r},Rt=()=>{let t=p.useRef(0),r=w(),e=X(),[a]=rt(),n=Z(),o=M(),i=_t(a),s=wt(),m=o.map(l=>{let h={path:l.route.path};return Object.keys(l.params).length>0&&(h.params=l.params),h}),c={url:s,path:r.pathname,routeParams:e,searchParams:i,hash:r.hash,routeState:r.state,routeMatches:m};return l=>{t.current++;let h=`${l}_${t.current}`;switch(l){case u.STORY_LOADED:return{key:h,type:l,data:c};case u.NAVIGATION:return{key:h,type:l,data:{...c,navigationType:n}};case u.ROUTE_MATCHES:return{key:h,type:l,data:{matches:m}}}}};function K(){let{renderStory:t,storyContext:r}=j(),e=S.getChannel(),a=w(),n=M(),o=Rt(),i=p.useRef(),s=p.useRef(),m=p.useRef(),c=i.current!==void 0,l=c&&a.key!==i.current;return l&&s.current!==a.key&&(e.emit(u.NAVIGATION,o(u.NAVIGATION)),s.current=a.key),l&&n.length>0&&n!==m.current&&e.emit(u.ROUTE_MATCHES,o(u.ROUTE_MATCHES)),!c&&n.length>0&&(e.emit(u.STORY_LOADED,o(u.STORY_LOADED)),i.current=a.key,m.current=n),m.current=n,d.createElement(d.Fragment,null,t(r))}K.displayName="RouterLogger";function St(){let{addonParameters:t={}}=j(),{hydrationData:r,routing:e,navigationHistory:a,location:n}=t,o=ft(),i=p.useMemo(()=>{let s=Ot(e),m=o(s),c=V(m,d.createElement(K,null)),{initialEntries:l,initialIndex:h}=Et({navigationHistory:a,location:n,routes:c});return J(c,{initialEntries:l,initialIndex:h,hydrationData:r})},[o,r,n,a,e]);return d.createElement(et,{router:i,fallbackElement:d.createElement(Tt,null)})}function Tt(){return d.createElement("p",null,"Performing initial data load")}var Dt=({renderStory:t,storyContext:r,addonParameters:e})=>{let a=ct();return d.createElement(b.Provider,{value:{renderStory:t,storyContext:r,addonParameters:e}},d.createElement(N.Provider,{value:a},d.createElement(St,null)))};function At(t){if(d.isValidElement(t))return!0;switch(!0){case d.isValidElement(t):case typeof t=="string":case typeof t=="number":case typeof t=="boolean":case t===null:case t===void 0:case(t instanceof Object&&f(t,Symbol.iterator)):return!0}return!1}function Pt(t){return At(t)?{element:t}:t}function It(t={}){let r=["location","navigationHistory","routing"];if(Object.keys(t??{}).some(a=>r.includes(a)))return t;let e={routing:{},location:{},hydrationData:void 0};if(f(t,"routePath")&&(e.location.path=t.routePath,e.routing.path=t.routePath),f(t,"routeParams")&&(e.location.pathParams=t.routeParams),f(t,"routeState")&&(e.location.state=t.routeState),f(t,"routeHandle")&&(e.routing.handle=t.routeHandle),f(t,"searchParams")&&(e.location.searchParams=t.searchParams),f(t,"browserPath")&&(e.location.path=t.browserPath),f(t,"loader")&&(e.routing.loader=t.loader),f(t,"action")&&(e.routing.action=t.action),f(t,"errorElement")&&(e.routing.errorElement=t.errorElement),f(t,"hydrationData")&&(e.hydrationData=t.hydrationData),f(t,"shouldRevalidate")&&(e.routing.shouldRevalidate=t.shouldRevalidate),f(t,"routeId")&&(e.routing.id=t.routeId),f(t,"outlet")){let a=Pt(t.outlet);a.path??(a.path=""),e.routing.children=[a]}return e.routing.useStoryElement=!0,e}var jt=ut({name:"withRouter",parameterName:st,wrapper:(t,r,{parameters:e})=>{let a=It(e);return d.createElement(Dt,{renderStory:t,storyContext:r,addonParameters:a})}});export{$t as B,jt as K};
//# sourceMappingURL=index-d91fbc12.js.map
